<html>
<head>
<meta name=viewport content="width=device-width, initial-scale=1, user-scalable=0">
<meta charset="utf-8" />
<link rel="stylesheet" href="css/core.css">
<link rel="stylesheet" href="css/main.css">
<title>상하의 트위스트</title>
<style>
.desc {
    float: left;
    width: 100%;
    color: #888;
    font-size: 0.9em;
}
.pad-4 { padding: 0 4px; }
.pad-8 { padding: 0 8px; }
canvas { border: solid 1px black; display: block;  height : 300px; width : 300px; }
#input {
float: left;
width: 20%;
padding: 0 16px;
box-sizing: border-box;
line-height: 46px;
text-align: center;
background-color: white;
color: #D44010;
border: 1px solid #D44010;
border-radius: 4px;
}
</style>
</head>
<body>
   <div class="page-hdr">코디</div>
   <div class = "section pad-24 mtop-10">
   
      <div class="crop">	
   <input type='file' id='image_file' align = center>
   <input type='button' value='Load' onclick='LoadImage();' />
   <canvas id="canvas"></canvas>

   <canvas id="canvas2"></canvas>  
    <input type='file' id='image_file2' align = center>
   <input type='button' value='Load2' onclick='LoadImage2();' />
   
<br><br>
</div>
</div>

<div class="page-footer">
      <div class="page-mnu">
      <div class="menu" onclick="mix()">의상조합</div>
      <div class="menu" onclick="closet()">나의옷장</div>
      <div class="menu" onclick="community()">커뮤니티</div>
      <div class="menu" onclick="setup()">설정</div>
      </div>
   </div>
   </body>

</html>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/core.js"></script>
<script src="http://html2canvas.hertzen.com/dist/html2canvas.js"></script>
<script type="text/javascript">



function LoadImage()
{

	var pic1
   var inputFile = document.getElementById('image_file');
   var clsFileReader = new FileReader();
   clsFileReader.onload = function(){
      img = new Image();

      img.onload = function(){
         var canvas = document.getElementById("canvas")
         canvas.width = img.width;
         canvas.height = img.height;
         var ctx = canvas.getContext("2d");
         ctx.drawImage( img, 0, 0 );
      };

      img.src = clsFileReader.result;
      
   };

   clsFileReader.readAsDataURL(inputFile.files[0]);
	pic1 = canvas.toDataURL("image/png");  
   console.log(pic1);
   return pic1;
}

function LoadImage2()
{
   if( typeof window.FileReader !== 'function' )
   {
      alert("FileReader is not supported");
      return;
   }
	var pic2;
   var inputFile = document.getElementById('image_file2');
   var clsFileReader = new FileReader();
   clsFileReader.onload = function(){
      img = new Image();

      img.onload = function(){
         var canvas = document.getElementById("canvas2")
         canvas.width = img.width;
         canvas.height = img.height;
         var ctx = canvas.getContext("2d");
         ctx.drawImage( img, 0, 0 );
      };

      img.src = clsFileReader.result;
      pic2 = canvas.toDataURL("image/png");  
      console.log(pic2);
      return pic2;
   };

   clsFileReader.readAsDataURL(inputFile.files[0]);
   return pic2;
}

function save(){
   const imgBase64 = cap();
   console.log(imgBase64);
   const a = document.createElement("a");
   a.href = imgBase64;
   a.download = "canvas-image.jpg";
   a.click()
   };
   

/*   $(function(){
      $("#cap").click(function(){
      html2canvas($('#canvas_crop').get(0)).then(function(canvas){
      document.getElementById('img').appendChild(canvas)
         
   });      
   });
}); */
   
   function cap(){
   var capture;
      html2canvas($('#canvas_crop').get(0)).then(function(canvas){
         var capimg = document.getElementById('img').appendChild(canvas)
         capimg = new capimg();    
         capture.src = capimg.toDataURL("image/jpeg");
            imgBase = capture.src;
         return imgBase;
      });
}
   
function l(){
	var canvas = document.getElementById('mycanvas');
	canvas.width = 300;
	canvas.height = 700;
	var context = canvas.getContext('2d');

	var img01 = new Image();
	var img02 = new Image();
	img01.onload = function(){
	  context.drawImage(img01, 290, 20, 129, 340, 20, 20, 180, 150);
	  context.drawImage(img02, 0, 0, 230, 160);
	}

	img01.src = LoadImage();
	img02.src = LoadImage2();
	}

   
function mix() {
   window.location.href = "mix.html";
   }
function closet() {
   window.location.href = "closet.html";
   };
function community() {
   window.location.href = "main.html";
   }
function setup() {
   window.location.href = "setup.html";
   }
   


</script>